<!DOCTYPE html>
<html lang="<%= lang %>" dir="<%= dir %>">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <% if (lang === 'ar') { %>Careers Community - Ø·Ù„Ø¨ Ø§Ù„ØªÙˆØ¸ÙŠÙ<% } 
        else if (lang === 'en') { %>Careers Community - Job Application<% } 
        else if (lang === 'zh') { %>Careers Community - æ±‚èŒç”³è¯·<% } 
        else if (lang === 'ja') { %>Careers Community - æ±‚äººå¿œå‹Ÿ<% } 
        else if (lang === 'de') { %>Careers Community - Stellenbewerbung<% } 
        else if (lang === 'fr') { %>Careers Community - Candidature<% } 
        else if (lang === 'es') { %>Careers Community - Solicitud de empleo<% } 
        else { %>Careers Community - Application<% } %>
    </title>
    
    <!-- Ø®Ø·ÙˆØ· -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=El+Messiri:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&family=Noto+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ -->
    <link rel="stylesheet" href="/css/application.css">
</head>
<body class="font-<%= lang === 'ar' ? 'arabic' : lang === 'zh' ? 'chinese' : lang === 'ja' ? 'japanese' : 'default' %>">
    
    <!-- Ø®Ù„ÙÙŠØ© Ø§Ù„Ù†Ø¬ÙˆÙ… -->
    <div class="stars" id="stars"></div>
    
    <!-- Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© -->
    <div class="floating-element" id="floating1" style="width: 200px; height: 200px;"></div>
    <div class="floating-element" id="floating2" style="width: 150px; height: 150px;"></div>
    
    <!-- Ø²Ø± ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© -->
    <div class="language-selector" id="languageSelector">
        <button class="language-btn" id="languageBtn">
            <i class="fas fa-globe"></i>
            <span class="current-lang"><%= langName %></span>
            <i class="fas fa-chevron-down"></i>
        </button>
        
        <div class="language-dropdown" id="languageDropdown">
            <div class="lang-option <%= lang === 'ar' ? 'active' : '' %>" data-lang="ar">
                <span>ğŸ‡¸ğŸ‡¦</span> <span>Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
            </div>
            <div class="lang-option <%= lang === 'en' ? 'active' : '' %>" data-lang="en">
                <span>ğŸ‡ºğŸ‡¸</span> <span>English</span>
            </div>
            <div class="lang-option <%= lang === 'zh' ? 'active' : '' %>" data-lang="zh">
                <span>ğŸ‡¨ğŸ‡³</span> <span>ä¸­æ–‡ (Chinese)</span>
            </div>
            <div class="lang-option <%= lang === 'ja' ? 'active' : '' %>" data-lang="ja">
                <span>ğŸ‡¯ğŸ‡µ</span> <span>æ—¥æœ¬èª (Japanese)</span>
            </div>
            <div class="lang-option <%= lang === 'de' ? 'active' : '' %>" data-lang="de">
                <span>ğŸ‡©ğŸ‡ª</span> <span>Deutsch (German)</span>
            </div>
            <div class="lang-option <%= lang === 'fr' ? 'active' : '' %>" data-lang="fr">
                <span>ğŸ‡«ğŸ‡·</span> <span>FranÃ§ais (French)</span>
            </div>
            <div class="lang-option <%= lang === 'es' ? 'active' : '' %>" data-lang="es">
                <span>ğŸ‡ªğŸ‡¸</span> <span>EspaÃ±ol (Spanish)</span>
            </div>
        </div>
    </div>

    <!-- Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div class="application-container">
        <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">ğŸ“‹</div>
                <div class="logo-text">Careers Community</div>
            </div>
            <a href="/" class="back-link">
                <% if (lang === 'ar') { %>
                    <i class="fas fa-arrow-right"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                <% } else { %>
                    <i class="fas fa-arrow-left"></i> Back to Home
                <% } %>
            </a>
        </header>
        
        <!-- Ù…Ø¤Ø´Ø± Ø§Ù„Ø®Ø·ÙˆØ§Øª -->
        <div class="steps-indicator">
            <div class="step active">
                <div class="step-number">1</div>
                <span>
                    <% if (lang === 'ar') { %>Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©<% } 
                    else if (lang === 'en') { %>Personal Info<% } 
                    else if (lang === 'zh') { %>ä¸ªäººä¿¡æ¯<% } 
                    else if (lang === 'ja') { %>å€‹äººæƒ…å ±<% } 
                    else if (lang === 'de') { %>PersÃ¶nliche Daten<% } 
                    else if (lang === 'fr') { %>Informations personnelles<% } 
                    else if (lang === 'es') { %>InformaciÃ³n personal<% } 
                    else { %>Personal Info<% } %>
                </span>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <span>
                    <% if (lang === 'ar') { %>Ø§Ù„Ø®Ø¨Ø±Ø§Øª ÙˆØ§Ù„Ù…Ù‡Ø§Ø±Ø§Øª<% } 
                    else if (lang === 'en') { %>Experience & Skills<% } 
                    else if (lang === 'zh') { %>ç»éªŒä¸æŠ€èƒ½<% } 
                    else if (lang === 'ja') { %>çµŒé¨“ã¨ã‚¹ã‚­ãƒ«<% } 
                    else if (lang === 'de') { %>Erfahrung & FÃ¤higkeiten<% } 
                    else if (lang === 'fr') { %>ExpÃ©rience & CompÃ©tences<% } 
                    else if (lang === 'es') { %>Experiencia y habilidades<% } 
                    else { %>Experience & Skills<% } %>
                </span>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <span>
                    <% if (lang === 'ar') { %>Ø±ÙØ¹ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©<% } 
                    else if (lang === 'en') { %>Upload Resume<% } 
                    else if (lang === 'zh') { %>ä¸Šä¼ ç®€å†<% } 
                    else if (lang === 'ja') { %>å±¥æ­´æ›¸ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰<% } 
                    else if (lang === 'de') { %>Lebenslauf hochladen<% } 
                    else if (lang === 'fr') { %>TÃ©lÃ©charger CV<% } 
                    else if (lang === 'es') { %>Subir currÃ­culum<% } 
                    else { %>Upload Resume<% } %>
                </span>
            </div>
        </div>
        
        <!-- Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <div class="application-card">
            <div class="page-header">
                <h1 class="page-title text-transition">
                    <% if (lang === 'ar') { %>Ø·Ù„Ø¨ Ø§Ù„ØªÙˆØ¸ÙŠÙ<% } 
                    else if (lang === 'en') { %>Job Application<% } 
                    else if (lang === 'zh') { %>æ±‚èŒç”³è¯·<% } 
                    else if (lang === 'ja') { %>æ±‚äººå¿œå‹Ÿ<% } 
                    else if (lang === 'de') { %>Stellenbewerbung<% } 
                    else if (lang === 'fr') { %>Candidature<% } 
                    else if (lang === 'es') { %>Solicitud de empleo<% } 
                    else { %>Application<% } %>
                </h1>
                <p class="page-subtitle text-transition">
                    <% if (lang === 'ar') { %>
                        Ø§Ù…Ù„Ø£ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø£Ø¯Ù†Ø§Ù‡ Ù„ØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨Ùƒ Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ù‡Ù†.<br>Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø·Ù„Ø¨Ùƒ ÙˆØ§Ù„Ø§ØªØµØ§Ù„ Ø¨Ùƒ ÙÙŠ Ø£Ù‚Ø±Ø¨ ÙˆÙ‚Øª.
                    <% } else if (lang === 'en') { %>
                        Fill out the form below to apply to join the Careers Community.<br>Your application will be reviewed and you'll be contacted soon.
                    <% } else if (lang === 'zh') { %>
                        å¡«å†™ä»¥ä¸‹è¡¨æ ¼ç”³è¯·åŠ å…¥èŒä¸šç¤¾åŒºã€‚<br>æ‚¨çš„ç”³è¯·å°†è¢«å®¡æ ¸ï¼Œæˆ‘ä»¬ä¼šå°½å¿«ä¸æ‚¨è”ç³»ã€‚
                    <% } else if (lang === 'ja') { %>
                        ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒ ã«è¨˜å…¥ã—ã¦ã€ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¸ã®å‚åŠ ã‚’ç”³è«‹ã—ã¦ãã ã•ã„ã€‚<br>ç”³è«‹å†…å®¹ã‚’ç¢ºèªã®ã†ãˆã€ã™ãã«ã”é€£çµ¡ã„ãŸã—ã¾ã™ã€‚
                    <% } else if (lang === 'de') { %>
                        FÃ¼llen Sie das Formular aus, um sich bei der Careers Community zu bewerben.<br>Ihre Bewerbung wird geprÃ¼ft und Sie werden bald kontaktiert.
                    <% } else if (lang === 'fr') { %>
                        Remplissez le formulaire ci-dessous pour postuler Ã  la communautÃ© Careers.<br>Votre candidature sera examinÃ©e et vous serez contactÃ©(e) prochainement.
                    <% } else if (lang === 'es') { %>
                        Complete el siguiente formulario para solicitar unirte a la comunidad Careers.<br>Tu solicitud serÃ¡ revisada y te contactaremos pronto.
                    <% } else { %>
                        Fill out the form to apply.<br>We'll review and contact you soon.
                    <% } %>
                </p>
            </div>
            
            <form id="applicationForm" class="application-form">
                <!-- Ø§Ù„Ø§Ø³Ù… -->
                <div class="form-group">
                    <label class="form-label required" for="fullName">
                        <% if (lang === 'ar') { %>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„<% } 
                        else if (lang === 'en') { %>Full Name<% } 
                        else if (lang === 'zh') { %>å…¨å<% } 
                        else if (lang === 'ja') { %>æ°å<% } 
                        else if (lang === 'de') { %>VollstÃ¤ndiger Name<% } 
                        else if (lang === 'fr') { %>Nom complet<% } 
                        else if (lang === 'es') { %>Nombre completo<% } 
                        else { %>Full Name<% } %>
                    </label>
                    <input type="text" id="fullName" name="fullName" class="form-input" 
                        placeholder="<% if (lang === 'ar') { %>Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„<% } 
                        else if (lang === 'en') { %>Enter your full name<% } 
                        else if (lang === 'zh') { %>è¾“å…¥æ‚¨çš„å…¨å<% } 
                        else if (lang === 'ja') { %>æ°åã‚’å…¥åŠ›<% } 
                        else if (lang === 'de') { %>Geben Sie Ihren vollstÃ¤ndigen Namen ein<% } 
                        else if (lang === 'fr') { %>Entrez votre nom complet<% } 
                        else if (lang === 'es') { %>Ingresa tu nombre completo<% } 
                        else { %>Full name<% } %>" 
                        required>
                    <div class="error-message" id="nameError">
                        <% if (lang === 'ar') { %>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… ØµØ­ÙŠØ­<% } 
                        else if (lang === 'en') { %>Please enter a valid name<% } 
                        else if (lang === 'zh') { %>è¯·è¾“å…¥æœ‰æ•ˆå§“å<% } 
                        else if (lang === 'ja') { %>æœ‰åŠ¹ãªåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„<% } 
                        else if (lang === 'de') { %>Bitte geben Sie einen gÃ¼ltigen Namen ein<% } 
                        else if (lang === 'fr') { %>Veuillez entrer un nom valide<% } 
                        else if (lang === 'es') { %>Por favor, ingresa un nombre vÃ¡lido<% } 
                        else { %>Please enter a valid name<% } %>
                    </div>
                </div>
                
                <!-- Ø§Ù„Ø¹Ù…Ø± -->
                <div class="form-group">
                    <label class="form-label required" for="age">
                        <% if (lang === 'ar') { %>Ø§Ù„Ø¹Ù…Ø±<% } 
                        else if (lang === 'en') { %>Age<% } 
                        else if (lang === 'zh') { %>å¹´é¾„<% } 
                        else if (lang === 'ja') { %>å¹´é½¢<% } 
                        else if (lang === 'de') { %>Alter<% } 
                        else if (lang === 'fr') { %>Ã‚ge<% } 
                        else if (lang === 'es') { %>Edad<% } 
                        else { %>Age<% } %>
                    </label>
                    <input type="number" id="age" name="age" class="form-input" 
                        min="18" max="70" 
                        placeholder="<% if (lang === 'ar') { %>Ø£Ø¯Ø®Ù„ Ø¹Ù…Ø±Ùƒ<% } 
                        else if (lang === 'en') { %>Enter your age<% } 
                        else if (lang === 'zh') { %>è¾“å…¥æ‚¨çš„å¹´é¾„<% } 
                        else if (lang === 'ja') { %>å¹´é½¢ã‚’å…¥åŠ›<% } 
                        else if (lang === 'de') { %>Geben Sie Ihr Alter ein<% } 
                        else if (lang === 'fr') { %>Entrez votre Ã¢ge<% } 
                        else if (lang === 'es') { %>Ingresa tu edad<% } 
                        else { %>Your age<% } %>" 
                        required>
                    <div class="error-message" id="ageError">
                        <% if (lang === 'ar') { %>Ø§Ù„Ø¹Ù…Ø± ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨ÙŠÙ† 18 Ùˆ 70<% } 
                        else if (lang === 'en') { %>Age must be between 18 and 70<% } 
                        else if (lang === 'zh') { %>å¹´é¾„å¿…é¡»åœ¨18è‡³70å²ä¹‹é—´<% } 
                        else if (lang === 'ja') { %>å¹´é½¢ã¯18ã€œ70æ­³ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“<% } 
                        else if (lang === 'de') { %>Das Alter muss zwischen 18 und 70 Jahren liegen<% } 
                        else if (lang === 'fr') { %>L'Ã¢ge doit Ãªtre compris entre 18 et 70 ans<% } 
                        else if (lang === 'es') { %>La edad debe estar entre 18 y 70<% } 
                        else { %>Age must be 18-70<% } %>
                    </div>
                </div>
                
                <!-- Ø³Ù†Ø© Ø§Ù„ØªØ®Ø±Ø¬ -->
                <div class="form-group">
                    <label class="form-label required" for="graduationYear">
                        <% if (lang === 'ar') { %>Ø³Ù†Ø© Ø§Ù„ØªØ®Ø±Ø¬<% } 
                        else if (lang === 'en') { %>Graduation Year<% } 
                        else if (lang === 'zh') { %>æ¯•ä¸šå¹´ä»½<% } 
                        else if (lang === 'ja') { %>å’æ¥­å¹´<% } 
                        else if (lang === 'de') { %>Abschlussjahr<% } 
                        else if (lang === 'fr') { %>AnnÃ©e d'obtention du diplÃ´me<% } 
                        else if (lang === 'es') { %>AÃ±o de graduaciÃ³n<% } 
                        else { %>Graduation Year<% } %>
                    </label>
                    <select id="graduationYear" name="graduationYear" class="form-input" required>
                        <option value="">
                            <% if (lang === 'ar') { %>Ø§Ø®ØªØ± Ø³Ù†Ø© Ø§Ù„ØªØ®Ø±Ø¬<% } 
                            else if (lang === 'en') { %>Select graduation year<% } 
                            else if (lang === 'zh') { %>é€‰æ‹©æ¯•ä¸šå¹´ä»½<% } 
                            else if (lang === 'ja') { %>å’æ¥­å¹´ã‚’é¸æŠ<% } 
                            else if (lang === 'de') { %>Abschlussjahr auswÃ¤hlen<% } 
                            else if (lang === 'fr') { %>SÃ©lectionnez l'annÃ©e<% } 
                            else if (lang === 'es') { %>Selecciona el aÃ±o<% } 
                            else { %>Select year<% } %>
                        </option>
                        <% for(let year = 2024; year >= 2000; year--) { %>
                            <option value="<%= year %>"><%= year %></option>
                        <% } %>
                    </select>
                    <div class="error-message" id="graduationError">
                        <% if (lang === 'ar') { %>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø³Ù†Ø© Ø§Ù„ØªØ®Ø±Ø¬<% } 
                        else if (lang === 'en') { %>Please select graduation year<% } 
                        else if (lang === 'zh') { %>è¯·é€‰æ‹©æ¯•ä¸šå¹´ä»½<% } 
                        else if (lang === 'ja') { %>å’æ¥­å¹´ã‚’é¸æŠã—ã¦ãã ã•ã„<% } 
                        else if (lang === 'de') { %>Bitte wÃ¤hlen Sie das Abschlussjahr<% } 
                        else if (lang === 'fr') { %>Veuillez sÃ©lectionner l'annÃ©e<% } 
                        else if (lang === 'es') { %>Por favor, selecciona el aÃ±o<% } 
                        else { %>Please select year<% } %>
                    </div>
                </div>
                
                <!-- Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø®Ø¨Ø±Ø© -->
                <div class="form-group">
                    <label class="form-label required" for="experienceYears">
                        <% if (lang === 'ar') { %>Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø®Ø¨Ø±Ø©<% } 
                        else if (lang === 'en') { %>Years of Experience<% } 
                        else if (lang === 'zh') { %>å·¥ä½œå¹´é™<% } 
                        else if (lang === 'ja') { %>çµŒé¨“å¹´æ•°<% } 
                        else if (lang === 'de') { %>Berufserfahrung<% } 
                        else if (lang === 'fr') { %>AnnÃ©es d'expÃ©rience<% } 
                        else if (lang === 'es') { %>AÃ±os de experiencia<% } 
                        else { %>Experience<% } %>
                    </label>
                    <select id="experienceYears" name="experienceYears" class="form-input" required>
                        <option value="">
                            <% if (lang === 'ar') { %>Ø§Ø®ØªØ± Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø®Ø¨Ø±Ø©<% } 
                            else if (lang === 'en') { %>Select experience<% } 
                            else if (lang === 'zh') { %>é€‰æ‹©ç»éªŒ<% } 
                            else if (lang === 'ja') { %>çµŒé¨“ã‚’é¸æŠ<% } 
                            else if (lang === 'de') { %>Erfahrung auswÃ¤hlen<% } 
                            else if (lang === 'fr') { %>SÃ©lectionnez l'expÃ©rience<% } 
                            else if (lang === 'es') { %>Selecciona experiencia<% } 
                            else { %>Select experience<% } %>
                        </option>
                        <option value="0">
                            <% if (lang === 'ar') { %>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®Ø¨Ø±Ø©<% } 
                            else if (lang === 'en') { %>No experience<% } 
                            else if (lang === 'zh') { %>æ— ç»éªŒ<% } 
                            else if (lang === 'ja') { %>çµŒé¨“ãªã—<% } 
                            else if (lang === 'de') { %>Keine Erfahrung<% } 
                            else if (lang === 'fr') { %>Aucune expÃ©rience<% } 
                            else if (lang === 'es') { %>Sin experiencia<% } 
                            else { %>No experience<% } %>
                        </option>
                        <option value="1-2">
                            <% if (lang === 'ar') { %>1-2 Ø³Ù†ÙˆØ§Øª<% } 
                            else if (lang === 'en') { %>1-2 years<% } 
                            else if (lang === 'zh') { %>1-2å¹´<% } 
                            else if (lang === 'ja') { %>1-2å¹´<% } 
                            else if (lang === 'de') { %>1-2 Jahre<% } 
                            else if (lang === 'fr') { %>1-2 ans<% } 
                            else if (lang === 'es') { %>1-2 aÃ±os<% } 
                            else { %>1-2 years<% } %>
                        </option>
                        <option value="3-5">3-5 <%= lang === 'ar' ? 'Ø³Ù†ÙŠÙ†' : lang === 'en' ? 'years' : lang === 'zh' ? 'å¹´' : lang === 'ja' ? 'å¹´' : lang === 'de' ? 'Jahre' : lang === 'fr' ? 'ans' : lang === 'es' ? 'aÃ±os' : 'years' %></option>
                        <option value="5-10">5-10 <%= lang === 'ar' ? 'Ø³Ù†ÙŠÙ†' : lang === 'en' ? 'years' : lang === 'zh' ? 'å¹´' : lang === 'ja' ? 'å¹´' : lang === 'de' ? 'Jahre' : lang === 'fr' ? 'ans' : lang === 'es' ? 'aÃ±os' : 'years' %></option>
                        <option value="10+">
                            <% if (lang === 'ar') { %>Ø£ÙƒØ«Ø± Ù…Ù† 10 Ø³Ù†ÙˆØ§Øª<% } 
                            else if (lang === 'en') { %>10+ years<% } 
                            else if (lang === 'zh') { %>10å¹´ä»¥ä¸Š<% } 
                            else if (lang === 'ja') { %>10å¹´ä»¥ä¸Š<% } 
                            else if (lang === 'de') { %>Mehr als 10 Jahre<% } 
                            else if (lang === 'fr') { %>Plus de 10 ans<% } 
                            else if (lang === 'es') { %>MÃ¡s de 10 aÃ±os<% } 
                            else { %>10+ years<% } %>
                        </option>
                    </select>
                    <div class="error-message" id="experienceError">
                        <% if (lang === 'ar') { %>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø®Ø¨Ø±Ø©<% } 
                        else if (lang === 'en') { %>Please select experience<% } 
                        else if (lang === 'zh') { %>è¯·é€‰æ‹©ç»éªŒ<% } 
                        else if (lang === 'ja') { %>çµŒé¨“ã‚’é¸æŠã—ã¦ãã ã•ã„<% } 
                        else if (lang === 'de') { %>Bitte wÃ¤hlen Sie die Erfahrung<% } 
                        else if (lang === 'fr') { %>Veuillez sÃ©lectionner l'expÃ©rience<% } 
                        else if (lang === 'es') { %>Por favor, selecciona experiencia<% } 
                        else { %>Please select experience<% } %>
                    </div>
                </div>
                
                <!-- Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª -->
                <div class="form-group full-width">
                    <label class="form-label required" for="skills">
                        <% if (lang === 'ar') { %>Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª<% } 
                        else if (lang === 'en') { %>Skills<% } 
                        else if (lang === 'zh') { %>æŠ€èƒ½<% } 
                        else if (lang === 'ja') { %>ã‚¹ã‚­ãƒ«<% } 
                        else if (lang === 'de') { %>FÃ¤higkeiten<% } 
                        else if (lang === 'fr') { %>CompÃ©tences<% } 
                        else if (lang === 'es') { %>Habilidades<% } 
                        else { %>Skills<% } %>
                    </label>
                    <textarea id="skills" name="skills" class="form-input" 
                        placeholder="<% if (lang === 'ar') { %>Ø§ÙƒØªØ¨ Ù…Ù‡Ø§Ø±Ø§ØªÙƒ (Ù…Ø«Ø§Ù„: JavaScript, React, Node.js, ØªØµÙ…ÙŠÙ… ÙˆÙŠØ¨, Ø¥Ø¯Ø§Ø±Ø© Ù…Ø´Ø§Ø±ÙŠØ¹...)<% } 
                        else if (lang === 'en') { %>List your skills (e.g., JavaScript, React, Node.js, Web Design, Project Management...)<% } 
                        else if (lang === 'zh') { %>åˆ—å‡ºæ‚¨çš„æŠ€èƒ½ï¼ˆä¾‹å¦‚ï¼šJavaScriptã€Reactã€Node.jsã€ç½‘é¡µè®¾è®¡ã€é¡¹ç›®ç®¡ç†...ï¼‰<% } 
                        else if (lang === 'ja') { %>ã‚¹ã‚­ãƒ«ã‚’è¨˜å…¥ï¼ˆä¾‹ï¼šJavaScriptã€Reactã€Node.jsã€Webãƒ‡ã‚¶ã‚¤ãƒ³ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†...ï¼‰<% } 
                        else if (lang === 'de') { %>Ihre FÃ¤higkeiten auflisten (z.B. JavaScript, React, Node.js, Webdesign, Projektmanagement...)<% } 
                        else if (lang === 'fr') { %>Listez vos compÃ©tences (ex: JavaScript, React, Node.js, Design Web, Gestion de projet...)<% } 
                        else if (lang === 'es') { %>Enumera tus habilidades (ej: JavaScript, React, Node.js, DiseÃ±o web, GestiÃ³n de proyectos...)<% } 
                        else { %>List your skills (e.g., JavaScript, React...)<% } %>" 
                        required></textarea>
                    <div class="error-message" id="skillsError">
                        <% if (lang === 'ar') { %>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ù‡Ø§Ø±Ø§ØªÙƒ<% } 
                        else if (lang === 'en') { %>Please enter your skills<% } 
                        else if (lang === 'zh') { %>è¯·è¾“å…¥æ‚¨çš„æŠ€èƒ½<% } 
                        else if (lang === 'ja') { %>ã‚¹ã‚­ãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„<% } 
                        else if (lang === 'de') { %>Bitte geben Sie Ihre FÃ¤higkeiten ein<% } 
                        else if (lang === 'fr') { %>Veuillez entrer vos compÃ©tences<% } 
                        else if (lang === 'es') { %>Por favor, ingresa tus habilidades<% } 
                        else { %>Please enter skills<% } %>
                    </div>
                </div>
                
                <!-- Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù -->
                <div class="form-group full-width">
                    <label class="form-label" for="cv">
                        <% if (lang === 'ar') { %>Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© (CV)<% } 
                        else if (lang === 'en') { %>Resume (CV)<% } 
                        else if (lang === 'zh') { %>ç®€å† (CV)<% } 
                        else if (lang === 'ja') { %>å±¥æ­´æ›¸ (CV)<% } 
                        else if (lang === 'de') { %>Lebenslauf (CV)<% } 
                        else if (lang === 'fr') { %>CV<% } 
                        else if (lang === 'es') { %>CurrÃ­culum (CV)<% } 
                        else { %>Resume<% } %>
                    </label>
                    <div class="file-upload">
                        <input type="file" id="cv" name="cv" class="file-input" 
                               accept=".pdf,.doc,.docx,.jpg,.png">
                        <div class="file-upload-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <div class="file-upload-text">
                            <% if (lang === 'ar') { %>Ø§Ù†Ù‚Ø± Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©<% } 
                            else if (lang === 'en') { %>Click to upload resume<% } 
                            else if (lang === 'zh') { %>ç‚¹å‡»ä¸Šä¼ ç®€å†<% } 
                            else if (lang === 'ja') { %>ã‚¯ãƒªãƒƒã‚¯ã—ã¦å±¥æ­´æ›¸ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰<% } 
                            else if (lang === 'de') { %>Zum Hochladen klicken<% } 
                            else if (lang === 'fr') { %>Cliquez pour tÃ©lÃ©charger<% } 
                            else if (lang === 'es') { %>Haz clic para subir<% } 
                            else { %>Upload resume<% } %>
                        </div>
                        <div class="file-upload-note">
                            <% if (lang === 'ar') { %>Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø©: PDF, DOC, DOCX, JPG, PNG (Ø­ØªÙ‰ 5MB)<% } 
                            else if (lang === 'en') { %>Allowed: PDF, DOC, DOCX, JPG, PNG (max 5MB)<% } 
                            else if (lang === 'zh') { %>æ”¯æŒæ ¼å¼ï¼šPDFã€DOCã€DOCXã€JPGã€PNGï¼ˆæœ€å¤§5MBï¼‰<% } 
                            else if (lang === 'ja') { %>è¨±å¯ã•ã‚ŒãŸå½¢å¼: PDFã€DOCã€DOCXã€JPGã€PNGï¼ˆæœ€å¤§5MBï¼‰<% } 
                            else if (lang === 'de') { %>Erlaubt: PDF, DOC, DOCX, JPG, PNG (max. 5MB)<% } 
                            else if (lang === 'fr') { %>Formats acceptÃ©s: PDF, DOC, DOCX, JPG, PNG (max 5 Mo)<% } 
                            else if (lang === 'es') { %>Formatos permitidos: PDF, DOC, DOCX, JPG, PNG (mÃ¡x. 5 MB)<% } 
                            else { %>PDF, DOC, DOCX, JPG, PNG (5MB max)<% } %>
                        </div>
                        <div class="file-name" id="fileName"></div>
                    </div>
                </div>
                
                <!-- Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ -->
                <div class="submit-section">
                    <button type="submit" class="submit-btn" id="submitBtn">
                        <span>
                            <% if (lang === 'ar') { %>Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨<% } 
                            else if (lang === 'en') { %>Submit Application<% } 
                            else if (lang === 'zh') { %>æäº¤ç”³è¯·<% } 
                            else if (lang === 'ja') { %>å¿œå‹Ÿã‚’é€ä¿¡<% } 
                            else if (lang === 'de') { %>Bewerbung absenden<% } 
                            else if (lang === 'fr') { %>Soumettre la candidature<% } 
                            else if (lang === 'es') { %>Enviar solicitud<% } 
                            else { %>Submit<% } %>
                        </span>
                        <i class="fas fa-paper-plane btn-icon"></i>
                    </button>
                    <div class="progress-bar" id="progressBar"></div>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        // --- Ù†ÙØ³ Ø¯ÙˆØ§Ù„ ØµÙØ­Ø© Signup (createStars, applyDirectionStyles, validateForm, etc.) ---
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const starCount = 80;
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                const size = Math.random() * 2 + 1;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.animationDelay = `${Math.random() * 3}s`;
                starsContainer.appendChild(star);
            }
        }

        function applyDirectionStyles() {
            const isRTL = '<%= dir %>' === 'rtl';
            const floating1 = document.getElementById('floating1');
            const floating2 = document.getElementById('floating2');
            const langSelector = document.getElementById('languageSelector');
            const backLink = document.querySelector('.back-link i');

            if (floating1) {
                floating1.style.top = '10%';
                floating1.style[isRTL ? 'left' : 'right'] = '5%';
            }
            if (floating2) {
                floating2.style.bottom = '20%';
                floating2.style[isRTL ? 'right' : 'left'] = '10%';
            }
            if (langSelector) {
                langSelector.style[isRTL ? 'left' : 'right'] = '20px';
            }
            if (backLink) {
                backLink.className = isRTL ? 'fas fa-arrow-right' : 'fas fa-arrow-left';
            }
        }

        // Ø¹Ø±Ø¶ Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù
        document.getElementById('cv')?.addEventListener('change', function() {
            const fileName = this.files[0] ? this.files[0].name : '';
            const fileNameElement = document.getElementById('fileName');
            if (fileName) {
                fileNameElement.textContent = `<%= lang === 'ar' ? 'Ø§Ù„Ù…Ù„Ù: ' : lang === 'en' ? 'File: ' : lang === 'zh' ? 'æ–‡ä»¶: ' : lang === 'ja' ? 'ãƒ•ã‚¡ã‚¤ãƒ«: ' : lang === 'de' ? 'Datei: ' : lang === 'fr' ? 'Fichier: ' : lang === 'es' ? 'Archivo: ' : 'File: ' %>${fileName}`;
                fileNameElement.style.display = 'block';
                if (this.files[0].size > 5 * 1024 * 1024) {
                    alert('<%= lang === "ar" ? "âš ï¸ Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹! Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 5MB" : lang === "en" ? "âš ï¸ File too large! Max 5MB" : "âš ï¸ File size exceeds limit (5MB)" %>');
                    this.value = '';
                    fileNameElement.style.display = 'none';
                }
            } else {
                fileNameElement.style.display = 'none';
            }
        });

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        function validateForm() {
            let isValid = true;
            const fields = [
                { id: 'fullName', errorId: 'nameError', condition: v => v.trim().length >= 2 },
                { id: 'age', errorId: 'ageError', condition: v => v >= 18 && v <= 70 },
                { id: 'graduationYear', errorId: 'graduationError', condition: v => v !== '' },
                { id: 'experienceYears', errorId: 'experienceError', condition: v => v !== '' },
                { id: 'skills', errorId: 'skillsError', condition: v => v.trim().length >= 5 }
            ];
            
            fields.forEach(field => {
                const input = document.getElementById(field.id);
                const error = document.getElementById(field.errorId);
                const value = input.type === 'number' ? parseInt(input.value) : input.value;
                if (!field.condition(value)) {
                    error.style.display = 'block';
                    input.classList.add('error');
                    isValid = false;
                } else {
                    error.style.display = 'none';
                    input.classList.remove('error');
                }
            });
            return isValid;
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        document.getElementById('applicationForm')?.addEventListener('submit', async function(e) {
            e.preventDefault();
            if (!validateForm()) return;
            
            const submitBtn = document.getElementById('submitBtn');
            const progressBar = document.getElementById('progressBar');
            const originalBtnText = submitBtn.innerHTML;
            
            submitBtn.disabled = true;
            submitBtn.innerHTML = `<span><%= lang === 'ar' ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...' : lang === 'en' ? 'Sending...' : 'Submitting...' %></span><i class="fas fa-spinner fa-spin btn-icon"></i>`;
            progressBar.style.width = '30%';
            
            const formData = {
                fullName: document.getElementById('fullName').value,
                age: document.getElementById('age').value,
                graduationYear: document.getElementById('graduationYear').value,
                experienceYears: document.getElementById('experienceYears').value,
                skills: document.getElementById('skills').value,
                cvFile: document.getElementById('cv').files[0]?.name || null
            };
            
            try {
                progressBar.style.width = '60%';
                const response = await fetch('/submit-application', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });
                progressBar.style.width = '90%';
                const result = await response.json();
                
                if (result.success) {
                    progressBar.style.width = '100%';
                    progressBar.style.background = 'linear-gradient(90deg, #4CAF50, #45a049)';
                    submitBtn.innerHTML = `<span><%= lang === 'ar' ? 'ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­!' : lang === 'en' ? 'Sent successfully!' : 'Success!' %></span><i class="fas fa-check btn-icon"></i>`;
                    submitBtn.style.background = 'linear-gradient(45deg, #4CAF50, #45a049)';
                    setTimeout(() => window.location.href = '/success', 2000);
                } else {
                    throw new Error(result.message || 'Error');
                }
            } catch (error) {
                console.error('Error:', error);
                submitBtn.disabled = false;
                submitBtn.innerHTML = originalBtnText;
                progressBar.style.width = '0%';
                alert('<%= lang === "ar" ? "âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„" : "âŒ Submission failed" %>:\n' + error.message);
            }
        });

        // ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© (Ù†ÙØ³ Ù…Ù†Ø·Ù‚ Signup)
        const languageBtn = document.getElementById('languageBtn');
        const languageDropdown = document.getElementById('languageDropdown');

        if (languageBtn && languageDropdown) {
            languageBtn.addEventListener('click', e => {
                e.stopPropagation();
                languageDropdown.classList.toggle('show');
            });
            document.addEventListener('click', e => {
                if (!e.target.closest('.language-selector')) {
                    languageDropdown.classList.remove('show');
                }
            });
            document.querySelectorAll('.lang-option').forEach(opt => {
                opt.addEventListener('click', async e => {
                    e.preventDefault();
                    const lang = opt.dataset.lang;
                    const langName = opt.querySelector('span:last-child').textContent.trim();
                    document.body.classList.add('page-transition');
                    languageBtn.classList.add('changing');
                    try {
                        const res = await fetch('/change-language', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ lang, langName })
                        });
                        const result = await res.json();
                        if (result.success) {
                            setTimeout(() => window.location.reload(), 800);
                        } else {
                            throw new Error('Failed');
                        }
                    } catch (err) {
                        console.error('Language change error:', err);
                        languageBtn.classList.remove('changing');
                    }
                });
            });
        }

        // Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        window.addEventListener('DOMContentLoaded', () => {
            createStars();
            applyDirectionStyles();
            
            const card = document.querySelector('.application-card');
            if (card) {
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.8s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 300);
            }
        });
    </script>
</body>
</html>